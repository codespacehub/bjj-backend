generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Organization {
  id     String @id
  name   String
  cnpj   String @unique
  phone  String
  email  String
  domain String

  active Boolean?

  users      User[]
  teachers   Teacher[]
  modalities Modality[]

  updated_at DateTime? @default(now())
  created_at DateTime  @default(now())
}

model Modality {
  id          String @id
  name        String
  description String

  teachers Teacher[]
  users    User[]

  Organization Organization? @relation(fields: [organization], references: [id])
  organization String?

  updated_at DateTime?
  created_at DateTime  @default(now())
}

model Teacher {
  id        String @id
  name      String
  email     String @unique
  active    Boolean
  verified  Boolean
  password  String

  cpf         String @unique
  birth_date  String
  phone       String

  cep              String
  uf               String
  city             String
  street           String
  house_number     String
  district         String
  

  Organization Organization? @relation(fields: [organization], references: [id])
  organization String?
  Modalitiy    Modality?     @relation(fields: [modality], references: [id])
  modality     String?

  updated_at DateTime?
  created_at DateTime  @default(now())
}

model Graduation {
  id            String @id
  name          String
  color_degree  String?

  users User[]

  updated_at DateTime?
  created_at DateTime  @default(now())
}

model User {
  id               String  @id
  cpf              String  @unique
  name             String
  role             String
  email            String  @unique
  phone            String
  password         String
  birth_date       String

  uf               String
  cep              String
  city             String
  street           String
  district         String
  house_number     String
  amount_class     Int

  degree           Int
  plan             String
  active           Boolean
  payday           Int
  verified         Boolean
  
  Graduation Graduation? @relation(fields: [graduation], references: [id])
  graduation String?

  Organization Organization? @relation(fields: [organization], references: [id])
  organization String?

  Modality Modality? @relation(fields: [modality], references: [id])
  modality String?

  updated_at DateTime?
  created_at DateTime  @default(now())
}
