generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Organization {
  id     String @id
  name   String
  cnpj   String @unique
  phone  String
  email  String
  domain String

  active Boolean?

  users       User[]
  modalities  Modality[]
  graduations Graduation[]
  plans       Plan[]

  updated_at DateTime? @default(now())
  created_at DateTime  @default(now())

  @@map("organizations")
}

model Modality {
  id          String @id
  name        String
  description String

  users User[]

  graduations Graduation[]
  times       Times[]

  Organization    Organization? @relation(fields: [organization_id], references: [id])
  organization_id String?

  updated_at DateTime?
  created_at DateTime  @default(now())

  @@map("modalities")
}

model Graduation {
  id           String  @id
  name         String
  color_degree String?

  users User[]

  Modality    Modality? @relation(fields: [modality_id], references: [id])
  modality_id String?

  Organization    Organization? @relation(fields: [organization_id], references: [id])
  organization_id String?

  updated_at DateTime?
  created_at DateTime  @default(now())

  @@map("graduations")
}

model User {
  id         String @id
  cpf        String @unique
  name       String
  role       String
  email      String @unique
  phone      String
  password   String
  birth_date String

  uf           String
  cep          String
  city         String
  street       String
  district     String
  house_number String
  amount_class Int

  degree   Int
  plan     String
  active   Boolean
  payday   Int
  verified Boolean

  Graduation    Graduation? @relation(fields: [graduation_id], references: [id])
  graduation_id String?

  Organization    Organization? @relation(fields: [organization_id], references: [id])
  organization_id String?

  Modality    Modality? @relation(fields: [modality_id], references: [id])
  modality_id String?

  Plan    Plan?   @relation(fields: [plan_id], references: [id])
  plan_id String?

  updated_at DateTime?
  created_at DateTime  @default(now())

  @@map("users")
}

model Times {
  id String @id

  Modality    Modality? @relation(fields: [modality_id], references: [id])
  modality_id String?

  updated_at DateTime?
  created_at DateTime  @default(now())
}

model Plan {
  id          String @id
  name        String
  description String
  value       Int

  users User[]

  Organization    Organization? @relation(fields: [organization_id], references: [id])
  organization_id String?

  updated_at DateTime?
  created_at DateTime  @default(now())

  @@map("plans")
}
